import{j as e,C as x,P as p,O as g,r as c,V as j,L as h,T as b,u as f,D as v,B as y}from"./index-00740b47.js";const w=({textureUrl:r,dimensions:a,isVideo:o})=>{const t=c.useRef(null),[i,d]=c.useState(null),[l,m]=c.useState(null);c.useEffect(()=>{if(o){const s=document.createElement("video");s.src=r,s.crossOrigin="anonymous",s.loop=!0,s.muted=!0,s.playsInline=!0,s.play().catch(()=>{});const n=new j(s);return n.minFilter=h,n.magFilter=h,d(n),()=>{s.pause(),s.src="",n.dispose()}}else new b().load(r,n=>{n.minFilter=h,n.magFilter=h,m(n)})},[r,o]),f(s=>{t.current&&(t.current.rotation.y=Math.sin(s.clock.elapsedTime*.5)*.1,t.current.position.y=Math.sin(s.clock.elapsedTime*.8)*.05)});const u=o?i:l;return u?e.jsxs("mesh",{ref:t,castShadow:!0,receiveShadow:!0,children:[e.jsx("boxGeometry",{args:[a.width,a.height,a.depth]}),e.jsx("meshStandardMaterial",{map:u,side:v,metalness:.1,roughness:.3}),e.jsxs("mesh",{position:[0,0,-a.depth/2-.01],children:[e.jsx("planeGeometry",{args:[a.width,a.height]}),e.jsx("meshStandardMaterial",{color:"#00f3ff",emissive:"#00f3ff",emissiveIntensity:.2,transparent:!0,opacity:.3,side:y})]})]}):null},M=({size:r})=>{const a=c.useRef(null);f(t=>{a.current&&(a.current.rotation.z=t.clock.elapsedTime*.1)});const o=c.useMemo(()=>{const t=[],i=r*.2,d=[0,60,120,180,240,300];return t.push(e.jsxs("mesh",{position:[0,0,-.1],children:[e.jsx("ringGeometry",{args:[i-.01,i,64]}),e.jsx("meshBasicMaterial",{color:"#00f3ff",transparent:!0,opacity:.3})]},"center")),d.forEach((l,m)=>{const u=i*Math.cos(l*Math.PI/180),s=i*Math.sin(l*Math.PI/180);t.push(e.jsxs("mesh",{position:[u,s,-.1],children:[e.jsx("ringGeometry",{args:[i-.01,i,64]}),e.jsx("meshBasicMaterial",{color:"#4caf50",transparent:!0,opacity:.2})]},`outer-${m}`))}),t},[r]);return e.jsx("group",{ref:a,children:o})},S=({tensorData:r,isVideo:a=!1,size:o="medium",showFrame:t=!0,interactive:i=!0})=>{const l={small:{width:120,height:90},medium:{width:200,height:150},large:{width:320,height:240}}[o];return e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-[#00f3ff]/30 bg-black/50",style:{width:l.width,height:l.height},children:[e.jsxs(x,{shadows:!0,children:[e.jsx(p,{makeDefault:!0,position:[0,0,2.5],fov:50}),e.jsx("ambientLight",{intensity:.4}),e.jsx("pointLight",{position:[5,5,5],intensity:.8,castShadow:!0}),e.jsx("pointLight",{position:[-5,-5,5],intensity:.3,color:"#00f3ff"}),e.jsx("spotLight",{position:[0,5,5],angle:.3,penumbra:.5,intensity:.5,castShadow:!0}),t&&e.jsx(M,{size:2}),e.jsx(w,{textureUrl:r.objectUrl,dimensions:r.dimensions,isVideo:a}),i&&e.jsx(g,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/3,maxPolarAngle:Math.PI*2/3})]}),e.jsxs("div",{className:"absolute top-1 right-1 flex items-center gap-1 px-2 py-0.5 bg-black/60 rounded text-[8px] font-mono text-[#00f3ff]/80",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-[#00f3ff] rounded-full animate-pulse"}),"3D_TENSOR"]}),e.jsxs("div",{className:"absolute bottom-1 left-1 text-[7px] font-mono text-[#4caf50]/60",children:[r.dimensions.width.toFixed(2)," Ã— ",r.dimensions.height.toFixed(2)]})]})},T=({url:r,type:a,fileName:o,className:t=""})=>a==="video"?e.jsxs("div",{className:`relative ${t}`,children:[e.jsx("video",{src:r,controls:!0,className:"max-w-full max-h-48 rounded border border-[#00f3ff]/20",preload:"metadata"}),o&&e.jsx("div",{className:"absolute bottom-1 left-1 px-2 py-0.5 bg-black/80 text-[8px] text-[#00f3ff]/80 font-mono rounded",children:o})]}):e.jsxs("div",{className:`relative ${t}`,children:[e.jsx("img",{src:r,alt:o||"Image",className:"max-w-full max-h-48 rounded border border-[#00f3ff]/20 object-contain"}),o&&e.jsx("div",{className:"absolute bottom-1 left-1 px-2 py-0.5 bg-black/80 text-[8px] text-[#00f3ff]/80 font-mono rounded",children:o})]});export{T as MediaPreview,S as default};
//# sourceMappingURL=Media3DRenderer-70aa9197.js.map
